import matplotlib.pyplot as plt
import numpy as np


plt.figure(0, figsize=(10, 10))

iw = [5208.819529,5407.043765,5465.744447,5433.497599,5340.776784,5231.953785,5272.428804,5147.632123,5360.519916,5208.186097,5368.412855,5145.065089,5289.757300,5313.220178,5290.896056,5450.829642,5504.338597,5425.095903,5318.612171,5329.499407,5415.070197,5216.171925,5433.015590,5267.096975,5411.917875,5545.652599,5444.810319,5289.230506,5467.355338,5218.014890,5392.162213,5424.691214,5613.070498,5385.680370,5339.848396,5335.628405,5130.021759,5499.950749,5329.733444,5411.038475,5382.896021,5571.564029,5281.580379,5110.094504,5423.336964,5447.701092,5523.057934,5455.455000,5131.062517,5224.279163,5257.449822,5363.454693,5363.119610,5199.565832,5169.763400,5471.282257,5217.406727,5276.436073,5360.388678,5700.646850,5736.159584,5314.640237,5331.352886,5092.826875,]
rv = [5192.448247,5447.378809,5470.806732,5483.223814,5405.758002,5216.202545,5306.587549,5226.905899,5390.707530,5178.351087,5569.295785,5244.666152,5265.605297,5360.149244,5388.593986,5549.437184,5507.619009,5427.491451,5372.275160,5359.952782,5289.686625,5286.576640,5461.404154,5388.289030,5386.949086,5569.586723,5467.543606,5356.770959,5347.043870,5250.214212,5548.420157,5417.938384,5445.901908,5318.546342,5362.518038,5376.803248,5231.428951,5459.305288,5407.334810,5350.762362,5477.979762,5509.834824,5457.419409,5102.215683,5289.607775,5466.663281,5402.106290,5482.288316,5198.577743,5329.609898,5308.388025,5530.434932,5389.649211,5214.670864,5223.246494,5450.043309,5283.847722,5254.242985,5293.570746,5621.600059,5655.424494,5313.697330,5275.069590,5135.181401,]
optimized = [3697.666113,3862.611223,3894.318076,3840.992905,3819.094709,3699.789540,3774.095637,3742.888031,3822.408820,3661.051590,3824.903458,3775.769033,3805.866161,3822.600831,3770.744197,3863.774501,3821.169369,3820.876914,3754.813960,3760.856595,3779.029482,3764.382319,3824.587016,3775.120828,3831.805679,3885.766650,3858.098495,3806.363698,3841.777706,3777.143542,3842.651969,3819.230091,3903.261921,3767.809779,3785.684916,3797.440790,3726.420714,3807.317472,3790.749979,3792.926970,3852.085818,3896.627548,3865.092693,3724.265186,3759.299394,3823.143813,3811.324867,3845.093354,3714.992563,3810.401332,3798.847198,3878.789810,3793.014465,3732.413162,3718.111082,3846.949273,3750.491332,3734.852408,3794.077928,3935.266784,3926.835596,3804.755635,3792.499261,3734.379018,]

max_of_all = max(max(max(rv), max(iw)), max(optimized))

print(f"Stats for iw: Variance is {round(np.var(iw), 2)}, std is {round(np.std(iw),2)}, Mean is {round(np.mean(iw),2)})")
print(f"Stats for rv: Variance is {round(np.var(rv),2)}, std is {round(np.std(rv),2)}, Mean is {round(np.mean(rv),2)}")
print(f"Stats for optimized: Variance is {round(np.var(optimized),2)}, std is {round(np.std(optimized),2)}, Mean is {round(np.mean(optimized),2)}")


iw = [x/max_of_all for x in iw]
rv = [x/max_of_all for x in rv]
optimized = [x/max_of_all for x in optimized]

x = [i for i in range(len(iw))]

z_iw = np.polyfit(x, iw, 1)
p_iw = np.poly1d(z_iw)
z_rv = np.polyfit(x, rv, 1)
p_rv = np.poly1d(z_rv)
z_optimized = np.polyfit(x, optimized, 1)
p_optimized = np.poly1d(z_optimized)


plt.plot(iw)
plt.plot(rv)
plt.plot(optimized)

plt.legend(["IW", "RV", "Optimized"])

plt.plot(x, p_iw(x))
plt.plot(x, p_rv(x))
plt.plot(x, p_optimized(x))

#plt.legend(["IW", "RV"])

plt.savefig("/mnt/ssd/bandits/variance.png")



